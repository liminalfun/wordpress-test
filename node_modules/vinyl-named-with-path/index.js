var path = require('path')
var through = require('through')

module.exports = function(opts) {
  return through(function(file) {
    if (typeof opts === 'function') {
      var res = opts.call(this, file);
      if (res != null) {
        file.named = res;
      }
    } else {
      file.named = path.join(path.dirname(file.relative), path.basename(file.path, path.extname(file.path)));
    }

    this.queue(file);
  });
};
